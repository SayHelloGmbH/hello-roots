$wp-gallery-column-gutter: 1rem !default;

.wp-block-gallery {
	list-style: none;
	@include for-screen-min(tablet) {
		display: flex;
		flex-flow: row wrap;
		margin-left: -$wp-gallery-column-gutter/2;
		margin-right: -$wp-gallery-column-gutter/2;

		&.alignwide {
			margin-left: 0;
			margin-right: 0;
		}

		&.alignfull {
			margin-left: 0;
			margin-right: 0;
		}
	}

	&.columns-2 {
		.blocks-gallery-item {
			@include for-screen-min(tablet) {
				flex-basis: percentage(1/2);
			}
		}
	}

	&.columns-3 {
		.blocks-gallery-item {
			@include for-screen-min(tablet) {
				flex-basis: percentage(1/2);

				&:first-of-type {
					flex-basis: percentage(1/1);
				}
			}
			@include for-screen-min(tablet_landscape) {
				flex-basis: percentage(1/3);

				&:first-of-type {
					flex-basis: percentage(1/3);
				}
			}
		}
	}

	&.columns-4 {
		.blocks-gallery-item {
			@include for-screen-min(tablet) {
				flex-basis: percentage(1/2);
			}
			@include for-screen-min(desktop) {
				flex-basis: percentage(1/4);
			}
		}
	}

	&.columns-5 {
		.blocks-gallery-item {
			@include for-screen-min(tablet) {
				flex-basis: percentage(1/2);

				&:first-of-type {
					flex-basis: percentage(1/1);
				}
			}
			@include for-screen-min(desktop) {
				flex-basis: percentage(1/5);

				&:first-of-type {
					flex-basis: percentage(1/5);
				}
			}
		}
	}

	&.columns-6 {
		.blocks-gallery-item {
			@include for-screen-min(tablet) {
				flex-basis: percentage(1/2);
			}
			@include for-screen-min(tablet_landscape) {
				flex-basis: percentage(1/3);
			}
			@include for-screen-min(desktop) {
				flex-basis: percentage(1/6);
			}
		}
	}
}

.blocks-gallery-item {
	flex: 1 100%;
	margin-top: $wp-gallery-column-gutter/2;
	margin-bottom: $wp-gallery-column-gutter/2;
	@include for-screen-min(tablet) {
		padding-left: $wp-gallery-column-gutter/2;
		padding-right: $wp-gallery-column-gutter/2;
	}
}